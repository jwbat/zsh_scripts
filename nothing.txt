LoRaWAN_Milesight_ABM_Destination
lorawan/milesight/abm
24e124707d112135



In most of MQTT world, topic/# will be a valid destination for topic, topic/subtopic, topic/subtopic/subtopic2
However, it is not that way in AWS IoT .

Here's the fine print in AWS message routing:
A subscription to sensor/# receives messages published to sensor/, sensor/temperature,
sensor/temperature/room1, but not messages published to sensor. <---- **** !!

============================================================================================

Here's a way to handle the # and subtopics to invoke special lambdas that don't need invoking on all MS dvcs.
pats_first is the MS processing Lambda that indirectly sends data on to S3 for snowpiping to SF.
Rule milesight_to_crdb  has an Action that invokes it upon lorawan/milesight
Rules can have multiple Actions, i.e. invoke multiple Lambdas.  Therefore, we can  add a new rule for ABM, abm_rule, that invokes both pats_first for general MS device decoding & piping to SF & writing to CRDB.  And it will also invoke abm_lambda for sending payloads to ABM's webhook.   This Rule would invoke on a topic like lorawan/milesight/abm/# or  lorawan/milesight/abm
